task.spawn(function()
    -- Exploit setup: require Fsys, setup clientData, items, downloader, etc.
    local load = require(game.ReplicatedStorage:WaitForChild("Fsys")).load
    set_thread_identity(2)
    local clientData = load("ClientData")
    local items = load("KindDB")
    local downloader = load("DownloadClient")
    local animationManager = load("AnimationManager")
    local petRigs = load("new:PetRigs")
    set_thread_identity(8)

    -- Exploit functions (createPet, GetPetByName, getPetModel, etc.)
    local petModels, pets, equippedPet = {}, {}, nil
    -- ... all the same functions ...

    -- Connect the spawn button inside task.spawn
    spawnBtn.MouseButton1Click:Connect(function()
        task.spawn(function()  -- <--- ensures the pet creation runs asynchronously
            local name = petNameBox.Text ~= "" and petNameBox.Text or "Unknown Pet"
            local rarity = selectedRarity or "FR"
            local petId = GetPetByName(name)
            if not petId then
                warn("Pet not found!")
                return
            end
            if rarity == "FR" then
                createPet(petId, {pet_trick_level=0, rideable=true, flyable=true, friendship_level=0, age=1, ailments_completed=0, rp_name=""})
            elseif rarity == "NFR" then
                createPet(petId, {pet_trick_level=0, neon=true, rideable=true, flyable=true, friendship_level=0, age=1, ailments_completed=0, rp_name=""})
            elseif rarity == "MFR" then
                createPet(petId, {pet_trick_level=0, mega_neon=true, rideable=true, flyable=true, friendship_level=0, age=1, ailments_completed=0, rp_name=""})
            end
            selectedLabel.Text = "Pet Spawned: "..name.." ("..rarity..")"
        end)
    end)
end)
