--// Services
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

--// Pet search function (search Workspace first, then ReplicatedStorage)
local function findPetAnywhere(petName)
    print("DEBUG: Searching Workspace for:", petName)
    
    local function recursiveSearch(parent)
        for _, child in ipairs(parent:GetChildren()) do
            if child.Name == petName and child:IsA("Model") then
                return child
            else
                local found = recursiveSearch(child)
                if found then return found end
            end
        end
    end

    -- Try Workspace first
    local found = recursiveSearch(workspace)
    if found then
        print("DEBUG: Pet found in Workspace at:", found:GetFullName())
        return found
    end

    print("DEBUG: Not found in Workspace. Searching ReplicatedStorage...")

    -- Try ReplicatedStorage
    found = recursiveSearch(ReplicatedStorage)
    if found then
        print("DEBUG: Pet found in ReplicatedStorage at:", found:GetFullName())
        return found
    end

    print("DEBUG: Pet NOT found anywhere.")
    return nil
end

-- Example usage
local testPetName = "Owl"
local pet = findPetAnywhere(testPetName)

print("DEBUG: LocalScript Loaded")

--// Pet Storage
local PetFolder = Workspace:WaitForChild("LocalPets")
print("DEBUG: PetFolder located at:", PetFolder:GetFullName())

--// GUI Setup
local PlayerGui = Player:WaitForChild("PlayerGui")
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PetSpawnerGui"
ScreenGui.Parent = PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 300, 0, 180)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -90)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(255, 150, 200)
MainFrame.Parent = ScreenGui

-- Title
local TitleFrame = Instance.new("Frame")
TitleFrame.Size = UDim2.new(1, -20, 0, 35)
TitleFrame.Position = UDim2.new(0, 10, 0, 5)
TitleFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
TitleFrame.BackgroundTransparency = 0.1
TitleFrame.BorderSizePixel = 0
TitleFrame.Parent = MainFrame

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,0,1,0)
Title.BackgroundTransparency = 1
Title.Text = "amina pets nyo"
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20
Title.Parent = TitleFrame

-- TextBox for pet name
local PetNameBox = Instance.new("TextBox")
PetNameBox.Name = "PetNameBox"
PetNameBox.Size = UDim2.new(0.9,0,0,30)
PetNameBox.Position = UDim2.new(0.05,0,0,50)
PetNameBox.PlaceholderText = "Enter Pet Name"
PetNameBox.BackgroundColor3 = Color3.fromRGB(60,60,60)
PetNameBox.TextColor3 = Color3.fromRGB(255,255,255)
PetNameBox.Font = Enum.Font.SourceSans
PetNameBox.TextSize = 18
PetNameBox.ClearTextOnFocus = false
PetNameBox.Parent = MainFrame

-- Buttons
local function CreateButton(name, color, posX)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Size = UDim2.new(0.25,0,0,30)
    btn.Position = UDim2.new(posX,0,0,90)
    btn.BackgroundColor3 = color
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 18
    btn.Parent = MainFrame
    return btn
end

local MFRBtn = CreateButton("MFR", Color3.fromRGB(255,100,100), 0.05)
local NFRBtn = CreateButton("NFR", Color3.fromRGB(100,255,100), 0.375)
local FRBtn = CreateButton("FR", Color3.fromRGB(100,100,255), 0.7)

local selectedRarity = "MFR"
local function setRarity(rarity)
    selectedRarity = rarity
    print("DEBUG: Selected rarity:", rarity)
end

MFRBtn.MouseButton1Click:Connect(function() setRarity("MFR") end)
NFRBtn.MouseButton1Click:Connect(function() setRarity("NFR") end)
FRBtn.MouseButton1Click:Connect(function() setRarity("FR") end)

-- Spawn Button
local SpawnBtn = Instance.new("TextButton")
SpawnBtn.Name = "SpawnButton"
SpawnBtn.Size = UDim2.new(0.9,0,0,40)
SpawnBtn.Position = UDim2.new(0.05,0,0,140)
SpawnBtn.BackgroundColor3 = Color3.fromRGB(80,120,255)
SpawnBtn.Text = "Spawn Pet"
SpawnBtn.TextColor3 = Color3.fromRGB(255,255,255)
SpawnBtn.Font = Enum.Font.SourceSansBold
SpawnBtn.TextSize = 20
SpawnBtn.Parent = MainFrame

-- Local inventory
local LocalInventory = {}

-- Pet spawner
SpawnBtn.MouseButton1Click:Connect(function()
    local petName = PetNameBox.Text
    if petName == "" then return end

    print("DEBUG: Attempting to spawn:", petName)
    local petTemplate = findPetAnywhere(petName)

    if not petTemplate then
        warn("Pet not found anywhere:", petName)
        return
    end

    local char = Player.Character or Player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    local petClone = petTemplate:Clone()
    petClone.Parent = workspace -- or PetFolder if you want
    if petClone.PrimaryPart then
        petClone:SetPrimaryPartCFrame(hrp.CFrame * CFrame.new(3, 0, 0))
    end

    table.insert(LocalInventory, {Name = petName, Rarity = selectedRarity, Model = petClone})
    print("DEBUG: Pet spawned successfully!")
end)


