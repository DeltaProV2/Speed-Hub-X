--// Pet Spawner LocalScript
print("DEBUG: LocalScript loaded")

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local Mouse = Player:GetMouse()

--=============================
-- GUI CREATION
--=============================

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PetSpawnerGui"
ScreenGui.Parent = Player:WaitForChild("PlayerGui")

print("DEBUG: GUI initialized")

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 220, 0, 140)
MainFrame.Position = UDim2.new(0.35, 0, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BorderSizePixel = 2
MainFrame.Parent = ScreenGui

-- Top Drag Bar
local DragBar = Instance.new("Frame")
DragBar.Size = UDim2.new(1, 0, 0, 28)
DragBar.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
DragBar.BorderSizePixel = 0
DragBar.Parent = MainFrame

local DragLabel = Instance.new("TextLabel")
DragLabel.Size = UDim2.new(1, 0, 1, 0)
DragLabel.BackgroundTransparency = 1
DragLabel.Font = Enum.Font.SourceSansBold
DragLabel.Text = "Pet Spawner"
DragLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
DragLabel.Parent = DragBar

-- Textbox for pet name
local PetNameBox = Instance.new("TextBox")
PetNameBox.Size = UDim2.new(1, -20, 0, 30)
PetNameBox.Position = UDim2.new(0, 10, 0, 40)
PetNameBox.PlaceholderText = "Enter Pet Name"
PetNameBox.Font = Enum.Font.SourceSans
PetNameBox.TextSize = 18
PetNameBox.TextColor3 = Color3.new(1,1,1)
PetNameBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
PetNameBox.Parent = MainFrame

-- Spawn Button
local SpawnButton = Instance.new("TextButton")
SpawnButton.Size = UDim2.new(1, -20, 0, 32)
SpawnButton.Position = UDim2.new(0, 10, 0, 80)
SpawnButton.Text = "Spawn Pet"
SpawnButton.TextColor3 = Color3.new(1,1,1)
SpawnButton.Font = Enum.Font.SourceSansBold
SpawnButton.BackgroundColor3 = Color3.fromRGB(0, 130, 200)
SpawnButton.Parent = MainFrame

print("DEBUG: Spawn GUI created")

--=============================
-- DRAG LOGIC
--=============================

local dragging = false
local dragStart, startPos

DragBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
	end
end)

DragBar.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		MainFrame.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
end)

--=============================
-- PET SPAWN LOGIC
--=============================

SpawnButton.MouseButton1Click:Connect(function()
	local petName = PetNameBox.Text
	if petName == "" then
		print("DEBUG: No pet name entered!")
		return
	end

	print("DEBUG: Trying to spawn pet:", petName)

	-- Example folder where pets are stored
	local PetFolder = game.Workspace:FindFirstChild("LocalPets")
	if not PetFolder then
		print("ERROR: PetFolder not found at Workspace.LocalPets")
		return
	end

	print("DEBUG: PetFolder located")

	local petModel = PetFolder:FindFirstChild(petName)
	if not petModel then
		print("ERROR: Pet \""..petName.."\" not found in folder")
		return
	end

	print("DEBUG: Pet found! Cloning...")

	local clone = petModel:Clone()
	clone.Parent = workspace

	print("SUCCESS: Pet spawned!")
end)
